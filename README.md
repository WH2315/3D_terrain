# 地形数据三维显示系统

这是一个基于 Python、PyQt5 和 Matplotlib 的地形数据三维可视化系统。

## 功能特点

1. **地形生成**：支持生成随机地形和经典的多峰（Peaks）地形。
2. **数据管理**：支持将生成的地形数据保存为 `.npz` 文件，并从文件中加载。
3. **三维显示**：利用 Matplotlib 进行高质量的三维曲面绘制。
4. **交互控制**：
   * 支持鼠标拖拽旋转和缩放。
   * 提供滑块精确控制视角（俯仰角和方位角）。
   * 支持切换多种颜色映射（Colormap）。
   * 支持切换曲面图和网格图（Wireframe）模式。    *   **新增**：支持显示等高线（Contours）。
    *   **新增**：实时显示地形统计信息（最高点、最低点、平均高度、平均坡度）。
## 环境依赖

请确保安装以下 Python 库：

```bash
pip install -r requirements.txt
```

主要依赖：

* numpy
* matplotlib
* PyQt5

## 运行方法

在项目根目录下运行：

```bash
python main.py
```

## 课程设计分工建议

本项目代码结构清晰，适合两人合作完成。建议分工如下：

### 同学 A：后端与数据处理 (Backend & Data)

**负责模块**：`core/` 文件夹下的内容
**具体任务**：

1. **数据生成算法 (`core/data_generator.py`)**：
   * 研究并实现地形生成算法（如当前代码中的正弦波叠加、高斯分布等）。
   * 尝试添加新的地形生成模式（例如：基于 Perlin 噪声的更真实地形）。
2. **文件 I/O (`core/file_handler.py`)**：
   * 实现数据的保存和读取逻辑。
   * 扩展功能：尝试支持读取真实世界的 DEM 数据（如读取简单的文本格式或图片灰度图作为高度图）。
3. **数据分析 (`core/data_analyzer.py`)**：
   * 已实现：计算地形的统计信息（最高点、最低点、平均高度）。
   * 已实现：计算平均坡度。
   * **已实现**：生成坡度图数据，支持基于坡度的地形着色。

### 同学 B：前端与可视化 (Frontend & Visualization)

**负责模块**：`ui/` 文件夹及 `main.py`
**具体任务**：

1. **界面设计 (`ui/main_window.py`)**：
   * 使用 PyQt5 设计主窗口布局。
   * 添加控件（按钮、滑块、下拉框）并美化界面。
   * **新增**：添加“着色模式”下拉框，支持在“高度”和“坡度”之间切换。
2. **三维绘图集成 (`ui/canvas.py`)**：
   * 将 Matplotlib 嵌入到 PyQt5 窗口中。
   * 实现绘图函数的封装（`plot_terrain`），处理颜色、光照等视觉效果。
   * **新增**：支持自定义着色数据（`color_data`），实现坡度可视化。
3. **交互逻辑**：
   * 将界面的信号（Signal）与后端的槽（Slot）连接起来。
   * 处理用户的输入事件（如点击按钮生成地形、拖动滑块改变视角）。

---

**项目结构说明**：

* `main.py`: 程序入口。
* `core/`: 核心逻辑包。
  * `data_generator.py`: 地形数据生成器。
  * `file_handler.py`: 文件读写处理器。
* `ui/`: 用户界面包。
  * `main_window.py`: 主窗口类。
  * `canvas.py`: 绘图画布类。
* `data/`: 存放数据文件的默认目录。
